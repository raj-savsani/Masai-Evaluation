<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=News+Cycle&display=swap" rel="stylesheet">
    <title>Worlds News </title>
    <style>

        #stories{
            font-family: 'News Cycle', sans-serif;
        }
        #stories>div{
            display: flex;

        }
        #stories > div > div{
            cursor: pointer;
            margin: 50px auto;
            width: 400px;
            /* height: 200px; */
        }
        #stories >div > div >img{
            width: 100%;
        } 
    </style>
</head>
<body>
    <div id="stories"></div>
</body>
</html>
<script>
    async function topStories(){
        let res = await fetch("https://newsapi.org/v2/top-headlines?q=Apple&from=2021-10-18&sortBy=popularity&apiKey=2bbdb0658c3246f198d118f464abdacf");

        data = await res.json();
       
        appendnews(data.articles);
    }
    topStories();

    let parent = document.getElementById("stories");

    function appendnews(a){

        a.forEach((n)=> {
            // console.log('n:', n)
            let main_div = document.createElement("div");
            // main_div.style.cursor = "pointer";
            main_div.addEventListener("click",()=>{
                location.href = "/news.html";

            })

            let div1 = document.createElement("div");

            let title = document.createElement("h2");

            title.textContent = n.title;
            // console.log('title:', title)

            let author = document.createElement("h4");

            author.textContent = n.author
            // console.log('author:', author)

            let time = document.createElement("p");

            time.textContent = n.publishedAt;

            // console.log('time:', time)

            div1.append(title,author,time);

            let div2 = document.createElement("div");

            let dis = document.createElement("p");

            dis.textContent = n.description;
            // console.log('dis:', dis)

            div2.append(dis);

            let div3 = document.createElement("div");

            let img = document.createElement("img");
            img.src = n.urlToImage;
            // console.log('img:', img)

            div3.append(img);

            main_div.append(div1,div2,div3);

            parent.append(main_div);
            
        });

    }
</script>